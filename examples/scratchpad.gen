
include(env, ref "examples/lib/prelude.gen");

reactive tick = create_timer(1000);

def seconds = tick / 1000;

def sum_fold = fun(sum : ptr i64, val : ptr i64) {
  *sum = *sum + *val;
}

def input = 30;

reactive sum = create_container(
  (observe input) as signal,
  i64,
  (ref 0) as ptr void,
  sum_fold as update_fn
);

print sum;
